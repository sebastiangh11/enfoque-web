---
import Container from "./Container.astro";
import Button from "./Button.astro";
import ServiceIcon from "./ServiceIcon.astro";
import { services } from "../data/services";

const serviceSeoDescriptions: Record<string, string> = {
  "branding-fisico": "Señalización, interiores y piezas corporativas para oficinas, retail y puntos de venta.",
  "expo-stands": "Diseño y producción de stands para ferias, expos y eventos empresariales.",
  "papeleria-corporativa": "Tarjetas, folders y papelería ejecutiva con impresión impecable.",
  "grabado-laser": "Corte y grabado láser en regalos corporativos personalizados, madera y piezas especiales.",
  "impresion-textil": "Uniformes, merch y textiles corporativos con producción controlada.",
  "diseno-grafico": "Diseño listo para impresión y fabricación, evitando retrabajos.",
};
---

<section id="servicios" class="relative overflow-hidden border-t border-border bg-surface-soft py-16 md:py-20" aria-labelledby="servicios-heading">
  <div
    class="pointer-events-none absolute inset-0 opacity-90 [background:radial-gradient(circle_at_14%_12%,color-mix(in_srgb,var(--brand-orange)_10%,transparent),transparent_44%),radial-gradient(circle_at_84%_16%,color-mix(in_srgb,var(--brand-blue)_8%,transparent),transparent_42%),linear-gradient(180deg,color-mix(in_srgb,var(--brand-orange)_3%,white),white_58%)]"
    aria-hidden="true"
  ></div>

  <Container class="relative">
    <header class="mx-auto max-w-3xl text-center">
      <p class="text-xs font-semibold uppercase tracking-[0.32em] text-brand-blue">SERVICIOS</p>
      <h2 id="servicios-heading" class="mt-3 text-3xl font-bold tracking-tight text-text-primary md:text-4xl">
        Servicios que hacen
        <span class="highlight-underline">visible</span>
        tu marca
      </h2>
      <p class="mt-4 text-base leading-relaxed text-text-secondary md:text-lg">
        Diseñamos publicidad impresa para empresas, branding físico corporativo y soluciones de producción e instalación en México, resolviendo proyectos complejos sin fricción.
      </p>
      <p class="mt-3 text-sm font-medium text-text-muted md:text-base">
        ¿Proyecto complejo? Nosotros lo resolvemos sin fricción.
      </p>
      <p class="sr-only">
        Servicios de impresión corporativa, stands, señalización, grabado láser y producción publicitaria en CDMX, Guadalajara y México.
      </p>
    </header>

    <ul class="mt-10 grid grid-cols-1 gap-4 sm:mt-12 sm:grid-cols-2 sm:gap-5 lg:grid-cols-3 lg:gap-6" role="list">
      {services.map((service) => (
        <li>
          <a
            href={`/servicios/${service.slug}`}
            class:list={[
              "group relative isolate flex h-full min-h-[15.5rem] cursor-pointer flex-col overflow-hidden rounded-2xl border border-border bg-surface p-5 shadow-sm transition-all duration-300 ease-out focus-visible:-translate-y-1 focus-visible:border-accent-green/50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent-green focus-visible:ring-offset-2 sm:min-h-[16rem] sm:p-6",
              "hover:-translate-y-1 hover:border-accent-green/50 hover:shadow-md hover:shadow-black/8",
            ]}
            aria-label={`Ver detalle de ${service.name}`}
          >
            <div class="pointer-events-none absolute inset-0 z-0 bg-gradient-to-b from-white/96 to-white/99" aria-hidden="true"></div>
            <div
              class="pointer-events-none absolute inset-0 z-0 opacity-0 transition-opacity duration-300 ease-out group-hover:opacity-100 group-focus-visible:opacity-100 bg-[linear-gradient(135deg,color-mix(in_srgb,var(--accent-green)_12%,transparent),transparent_46%,color-mix(in_srgb,var(--brand-blue)_6%,transparent))]"
              aria-hidden="true"
            ></div>

            <div class="relative z-10 flex items-start gap-3">
              <span
                class="inline-flex h-10 w-10 shrink-0 items-center justify-center rounded-xl border border-accent-green/20 bg-accent-green/5 text-brand-blue transition-colors duration-300 group-hover:border-accent-green/35 group-hover:bg-accent-green/10 group-hover:text-accent-green"
                aria-hidden="true"
              >
                <ServiceIcon icon={service.icon} class="h-5 w-5" />
              </span>

              <h3 class="text-base font-semibold leading-snug text-text-primary sm:text-lg">
                {service.name}
              </h3>
            </div>
            <p class="relative z-10 mt-3 text-sm leading-relaxed text-text-secondary">
              {serviceSeoDescriptions[service.slug] ?? service.shortDescription}
            </p>
          </a>
        </li>
      ))}
    </ul>

    <div class="mt-10 flex flex-col items-stretch justify-center gap-3 sm:mt-12 sm:flex-row sm:items-center sm:gap-4">
      <Button href="/#contacto" variant="primary" size="md" class="min-h-11 w-full !rounded-xl shadow-sm transition-all duration-200 hover:-translate-y-0.5 hover:shadow-md sm:w-auto">
        Cotizar proyecto
      </Button>
      <Button
        href="https://wa.me/525574570826?text=Hola%20Enfoque%2C%20quiero%20cotizar%20un%20proyecto."
        target="_blank"
        rel="noopener noreferrer"
        variant="ghost"
        size="md"
        class="min-h-11 w-full !rounded-xl border-2 !border-accent-green !bg-accent-green !text-white shadow-sm transition-all duration-200 hover:-translate-y-0.5 hover:!border-accent-green hover:!bg-accent-green/90 hover:!text-white hover:shadow-md sm:w-auto"
      >
        <svg class="mr-2 h-5 w-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347z" />
          <path d="M12.051 21.785h-.004a9.87 9.87 0 0 1-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 0 1-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884a9.86 9.86 0 0 1 9.881 9.892c-.003 5.45-4.437 9.884-9.885 9.884z" />
        </svg>
        WhatsApp
      </Button>
    </div>

    <div class="mt-4 text-center">
      <a
        href="/servicios"
        class="inline-flex items-center text-sm font-semibold text-text-secondary transition-colors hover:text-brand-blue focus:outline-none focus:ring-2 focus:ring-brand-orange focus:ring-offset-2"
      >
        Ver todos los servicios
        <span class="ml-1" aria-hidden="true">→</span>
      </a>
    </div>
  </Container>
</section>
